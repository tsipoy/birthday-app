{"version":3,"sources":["script.js"],"names":["console","log","endpoint","addButton","document","querySelector","birthdayData","select","input","fetchBirthday","destroyPopup","openPopup","classList","remove","fetch","response","json","data","populateBirthday","people","map","person","daySuffix","df","calculateAge","age","msDate","Date","now","getTime","ageDate","Math","abs","getFullYear","year","birthday","date","month","toLocaleString","birthDay","getDate","diff_days","dt2","dt1","diff","round","diffDays","id","picture","firstName","lastName","join","generatedBirthday","html","innerHTML","peopleData","addPeople","e","preventDefault","el","target","newPeople","value","getDay","push","reset","dispatchEvent","CustomEvent","addEditPopup","closest","editAddPopup","addEventListener","addFormPopup","createElement","add","insertAdjacentHTML","submitAddForm","addLastname","addFirstname","addAvatar","updateLocalStorage","once","body","appendChild","close","closeAddBtn","popupBirthday","tableRow","dataset","editPopup","editId","editIdPopup","find","Promise","resolve","formPopup","lastnameId","firstnameId","birthdayId","urlId","closeBtn","deletedPopup","deletedTr","tr","deletedFromId","deletedData","deletedId","deletePeople","openDiv","confirmDelete","cancelBtn","deletePersonBirthday","filter","deleteConfirm","initLocalStorage","stringForm","localStorage","getItem","listItems","JSON","parse","setItem","stringify","searchInput","filterInput","filterBirthday","toLowerCase","includes","filterFromHtml","selectForMonth","filterSelect","filterBirthdayByMonth","filterBirthdayByMonthHtml","window"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["console.log(\"It works\");\r\n\r\nconst endpoint = \"./people.json\";\r\nconst addButton = document.querySelector(\".add-buttton\")\r\nconst birthdayData = document.querySelector(\"tbody\");\r\nconst select = document.querySelector('.select-by-month');\r\nconst input = document.querySelector('[name=\"filter\"]');\r\n\r\nasync function fetchBirthday() {\r\n\r\n    const response = await fetch(endpoint);\r\n    let data = await response.json();\r\n\r\n    // loclal storage\r\n    // localStorage.setItem(\"people\", JSON.stringify(data));\r\n    // var item = JSON.parse(localStorage.getItem(\"people\"));\r\n\r\n    async function destroyPopup(openPopup) {\r\n        openPopup.classList.remove('open');\r\n        openPopup.remove();\r\n        openPopup = null;\r\n    }\r\n\r\n    const populateBirthday = people => {\r\n        return people.map(person => {\r\n            const daySuffix = function (df) {\r\n                if (df > 3 && df < 21) return \"th\";\r\n                switch (df % 10) {\r\n                    case 1: return \"st\";\r\n                    case 2: return \"nd\";\r\n                    case 3: return \"rd\";\r\n                    default: return \"th\";\r\n                }\r\n            }\r\n\r\n            const calculateAge = (age) => {\r\n                const msDate = Date.now() - age.getTime();\r\n                const ageDate = new Date(msDate);\r\n                return Math.abs(ageDate.getFullYear() - 1970) + 1;\r\n            }\r\n            const year = calculateAge(new Date(person.birthday));\r\n\r\n            let date = new Date(person.birthday);\r\n            let month = date.toLocaleString('default', { month: 'long' });\r\n            const birthDay = date.getDate();\r\n\r\n            // const dateDiffInDays = function(date1, date2) {\r\n            //     dt1 = new Date(date1);\r\n            //     dt2 = new Date(date2);\r\n            //     return Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate()) ) /(1000 * 60 * 60 * 24));\r\n            // }\r\n            // const totalDays = dateDiffInDays(new Date(person.birthDays));\r\n\r\n            // const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\r\n            // const firstDate = new Date(date.getDate());\r\n            // const secondDate = new Date();\r\n\r\n            // const diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));\r\n\r\n            // const firstDate = new Date(person.birthday);\r\n            // const secondDate = new Date();\r\n\r\n            // const difference = firstDate.getTime() - secondDate.getTime();\r\n\r\n            // var diffDays = Math.ceil(difference / (1000 * 3600 * 24));\r\n\r\n            function diff_days(dt2, dt1) {\r\n\r\n                let diff = (dt2.getTime() - dt1.getTime()) / 1000;\r\n                diff /= (60 * 60 * 24);\r\n                return Math.abs(Math.round(diff));\r\n\r\n            }\r\n\r\n            dt1 = new Date();\r\n            dt2 = new Date(person.birthday);\r\n            let diffDays = (diff_days(dt1, dt2));\r\n\r\n            return `\r\n                <tr data-id=\"${person.id}\" class=\"table-row\">\r\n                    <td class=\"picture\"><img src=\"${person.picture}\" alt=\"${person.firstName}\"></td>\r\n                    <td class=\"lastname\" data-value=\"${person.lastName}\">${person.lastName}</td>\r\n                    <td class=\"firstname\" data-value=\"${person.firstName}\">${person.firstName}</td>\r\n                    <td class=\"birthday\">Turns ${year} on the ${birthDay}<sup>${daySuffix(birthDay)}</sup> of ${month}</td>\r\n                    <td class=\"leftDay\">Days ${diffDays}<br></td>\r\n                    <td class=\"edit-btn\">\r\n                        <button class=\"edit\" value=\"${person.id}\">\r\n                            <img class=\"edit\" src=\"./images/edit_icon.png\" alt=\"${person.firstName}\"> \r\n                        </button>\r\n                    </td>\r\n                    <td class=\"delete-btn\">\r\n                        <button class=\"delete\" value=\"${person.id}\">\r\n                            <img class=\"delete\" src=\"./images/delete_icon.png\" alt=\"${person.firstName}\">  \r\n                        </button>\r\n                    </td>\r\n                </tr>\r\n        `;\r\n        }).join('')\r\n    };\r\n    const generatedBirthday = () => {\r\n        const html = populateBirthday(data);\r\n        birthdayData.innerHTML = html;\r\n    }\r\n    generatedBirthday();\r\n\r\n\r\n    let peopleData = [];\r\n    const addPeople = e => {\r\n        e.preventDefault();\r\n        console.log(e);\r\n        const el = e.target;\r\n        const newPeople = {\r\n            picture: el.picture.value,\r\n            lastName: el.lastName.value,\r\n            firstName: el.firstName.value,\r\n            birthday: el.birthday.getDay(),\r\n            id: Date.now(),\r\n        };\r\n        peopleData.push(newPeople);\r\n        console.log(newPeople);\r\n        el.reset();\r\n        birthdayData.dispatchEvent(new CustomEvent('updatedBirthday'));\r\n    }\r\n\r\n    const addEditPopup = (e) => {\r\n        if (e.target.closest('button.add-buttton')) {\r\n            console.log(\"It opens\");\r\n            editAddPopup(e);\r\n        }\r\n    }\r\n\r\n    birthdayData.addEventListener('click', addEditPopup);\r\n\r\n    // open add modal \r\n    const editAddPopup = () => {\r\n        const addFormPopup = document.createElement('form');\r\n        addFormPopup.classList.add('popup');\r\n        addFormPopup.classList.add('open');\r\n\r\n        addFormPopup.insertAdjacentHTML('afterbegin',\r\n            `\r\n        <fieldset> \r\n            <div class=\"form-group\">\r\n                <label for=\"addLastname\" class=\"lastname-label\" value=\"${addFormPopup.firstName}\">Lastname</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"addLastname\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"addFirstname\" class=\"firstname-label\" value=\"${addFormPopup.lastName}\">Firstname</label>\r\n                <input type=\"text\" class=\"form-control\"  id=\"addFirstname\" aria-describedby=\"firstnameHelp\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"addBirthday\" class=\"birthday-label\">Birthday</label>\r\n                <input type=\"date\" class=\"form-control\" id=\"addBirthday\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <label for=\"addAvatar\" class=\"avatar\" value=\"${addFormPopup.picture}\">Picture(Url)</label>\r\n                <input type=\"url\" class=\"form-control\" id=\"addAvatar\">\r\n            </div>\r\n            <div class=\"d-flex flex-row\">\r\n                <button type=\"submit\" class=\"submit-btn\">Save</button>\r\n                <button class=\"close-btn\" name=\"close\" type=\"button\">Close</button>\r\n            </div>\r\n        </fiedset>\r\n        `)\r\n\r\n        // submit form \r\n        addFormPopup.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            const submitAddForm = e.target;\r\n            submitAddForm.lastName = addFormPopup.addLastname.value;\r\n            submitAddForm.firstName = addFormPopup.addFirstname.value;\r\n            //submitAddForm.birthday = addFormPopup.addBirthday.value;\r\n            submitAddForm.picture = addFormPopup.addAvatar.value;\r\n            const newPeople = {\r\n                picture: submitAddForm.picture,\r\n                lastName: submitAddForm.lastName,\r\n                firstName: submitAddForm.firstName,\r\n                // birthday: submitAddForm.birthday,\r\n                id: Date.now(),\r\n            };\r\n            data.push(newPeople);\r\n            console.log(data);\r\n            generatedBirthday(newPeople);\r\n            destroyPopup(addFormPopup);\r\n            updateLocalStorage();\r\n\r\n            // birthdayData.dispatchEvent(new CustomEvent('updatedBirthday'));\r\n\r\n        }, { once: true });\r\n\r\n        // open form\r\n        document.body.appendChild(addFormPopup);\r\n        addFormPopup.classList.add('open');\r\n        // close form\r\n        if (addFormPopup.close) {\r\n            const closeAddBtn = addFormPopup.close;\r\n            closeAddBtn.addEventListener('click', (e) => {\r\n                destroyPopup(addFormPopup);\r\n                console.log('It is canceled');\r\n            }, { once: true });\r\n        }\r\n    };\r\n\r\n    addButton.addEventListener(\"click\", editAddPopup);\r\n\r\n    // editting popup\r\n\r\n    const popupBirthday = e => {\r\n        if (e.target.closest('button.edit')) {\r\n            const tableRow = e.target.closest('tr');\r\n            console.log(tableRow);\r\n            const id = tableRow.dataset.id;\r\n\r\n            editPopup(id);\r\n        }\r\n    }\r\n\r\n\r\n    // open modal \r\n    const editPopup = editId => {\r\n        const editIdPopup = data.find(person => person.id === editId || person.id == editId);\r\n        return new Promise(async function (resolve) {\r\n            const formPopup = document.createElement('form');\r\n            formPopup.classList.add('popup');\r\n            formPopup.classList.add('open');\r\n            console.log(editIdPopup.lastName);\r\n            formPopup.insertAdjacentHTML('afterbegin',\r\n                `\r\n                <fieldset> \r\n                        <div class=\"form-group\">\r\n                            <label for=\"lastname\">Lastname</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"lastnameId\" value=\"${editIdPopup.lastName}\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"firstname\">Firstname</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"firstnameId\" aria-describedby=\"firstnameHelp\" value=\"${editIdPopup.firstName}\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"birthday\">Birthday</label>\r\n                            <input type=\"date\" class=\"form-control\" id=\"birthdayId\" name=\"birthday-date\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"url\">Your avatar image</label>\r\n                            <input type=\"url\" class=\"form-control\" id=\"urlId\" value=\"${editIdPopup.picture}\">\r\n                        </div>\r\n                        <div class=\"d-flex flex-row\">\r\n                            <button type=\"submit\" class=\"submitbtn\" name=\"submit\">Submit</button>\r\n                            <button class=\"close-btn\" name=\"close\" type=\"button\">Close</button>\r\n                        </div>\r\n            \r\n                </fiedset>\r\n            `)\r\n\r\n\r\n            // submit form \r\n            formPopup.addEventListener('submit', e => {\r\n                e.preventDefault();\r\n                console.log(e.target);\r\n                editIdPopup.lastName = formPopup.lastnameId.value;\r\n                editIdPopup.firstName = formPopup.firstnameId.value;\r\n                editIdPopup.birthday = formPopup.birthdayId.value;\r\n                editIdPopup.picture = formPopup.urlId.value;\r\n                generatedBirthday(editIdPopup);\r\n                // resolve(e.target.displayList(editIdPopup));\r\n                destroyPopup(formPopup);\r\n                // birthdayData.dispatchEvent(new CustomEvent('updatedBirthday'));\r\n                updateLocalStorage();\r\n\r\n\r\n            }, { once: true });\r\n\r\n            // open form\r\n            document.body.appendChild(formPopup);\r\n            formPopup.classList.add('open');\r\n            // await wait(50);\r\n            // close form\r\n            if (formPopup.close) {\r\n                const closeBtn = formPopup.close;\r\n                closeBtn.addEventListener('click', (e) => {\r\n                    destroyPopup(formPopup);\r\n                    console.log('It is canceled');\r\n                }, { once: true });\r\n            }\r\n        },\r\n        )\r\n    };\r\n\r\n    // Confirm delete\r\n    const deletedPopup = (e) => {\r\n        const deletedTr = e.target.closest('button.delete')\r\n        if (deletedTr) {\r\n            const tr = e.target.closest('tr');\r\n            const deletedFromId = tr.dataset.id;\r\n            deletedData(deletedFromId);\r\n\r\n        }\r\n    }\r\n\r\n    const deletedData = deletedId => {\r\n        const deletePeople = data.find(person => person.id !== deletedId || person.id != deletedId);\r\n\r\n        console.log(data);\r\n        return new Promise(async function (resolve) {\r\n            const openDiv = document.createElement('article');\r\n            openDiv.classList.add('open');\r\n            openDiv.insertAdjacentHTML('afterbegin',\r\n                `\r\n                <article class=\"delete-confirm\" data-id=\"${openDiv.id}\">\r\n                    <p>Are you sure you want to delete it!</p>\r\n                    <button class=\"delete-button\" name=\"deleteBtn\" type=\"button\" data-id=\"${openDiv.id}\">Delete</button>\r\n                    <button class=\"cancel-button cancel\" name=\"cancel\" type=\"button\" data-id=\"${openDiv.id}\">Cancel</button>\r\n                </article>\r\n            `\r\n            );\r\n            const confirmDelete = (e) => {\r\n                const cancelBtn = e.target.closest('button.cancel-button');\r\n                if (cancelBtn) {\r\n                    console.log(\"You cancel it\");\r\n                    destroyPopup(openDiv);\r\n                }\r\n            }\r\n\r\n            openDiv.addEventListener('click', () => {\r\n                const deletePersonBirthday = data.filter(person => person.id != deletedId);\r\n                const deleteConfirm = document.querySelector(\"button.delete-button\");\r\n                if (deleteConfirm) {\r\n                    data = deletePersonBirthday;\r\n                    generatedBirthday(data);\r\n                    destroyPopup(openDiv);\r\n                    console.log(\"You delete it\");\r\n                    // birthdayData.dispatchEvent(new CustomEvent('updatedBirthday'));\r\n                    updateLocalStorage();\r\n\r\n                }\r\n            });\r\n\r\n            openDiv.addEventListener('click', confirmDelete);\r\n            document.body.appendChild(openDiv);\r\n            //await wait(20);\r\n            openDiv.classList.add('popup');\r\n        })\r\n    }\r\n\r\n    console.log(data)\r\n    const initLocalStorage = () => { \r\n        const stringForm = localStorage.getItem('data');\r\n        const listItems = JSON.parse(stringForm);\r\n\r\n        if (listItems) {\r\n            peopleData = listItems;\r\n            console.log(peopleData)\r\n        } else {\r\n            peopleData = data;\r\n        }\r\n        generatedBirthday(peopleData);\r\n            updateLocalStorage();\r\n    }\r\n\r\n    const updateLocalStorage = () => {\r\n        localStorage.setItem('data', JSON.stringify(data));\r\n    };\r\n\r\n    // Filter input\r\n    const searchInput = (e) => {\r\n        const filterInput = input.value;\r\n        console.log(filterInput);\r\n        const filterBirthday = data.filter(data => data.lastName.toLowerCase().includes(filterInput.toLowerCase()));\r\n        const filterFromHtml = populateBirthday(filterBirthday);\r\n        birthdayData.innerHTML = filterFromHtml;\r\n    }\r\n\r\n    // filter select\r\n    const selectForMonth = (e) => {\r\n        const filterSelect = select.value;\r\n        // const date = new Date(person.birthday);\r\n        // const month = date.toLocaleString('default', { month: 'long' });\r\n        console.log(filterSelect);\r\n        const filterBirthdayByMonth = data.filter(data => data[new Date(data.birthday).toLocaleString('default', { month: 'long' }).toLowerCase().includes(filterSelect.toLowerCase())] === data.filterSelect);\r\n        const filterBirthdayByMonthHtml = generatedBirthday(filterBirthdayByMonth);\r\n        birthdayData.innerHTML = filterBirthdayByMonthHtml;\r\n    }\r\n\r\n    select.addEventListener('change', selectForMonth);\r\n\r\n    input.addEventListener('input', searchInput);\r\n    birthdayData.addEventListener('submit', addPeople);\r\n    window.addEventListener('click', popupBirthday);\r\n    window.addEventListener('click', deletedPopup);\r\n    // birthdayData.addEventListener('updatedBirthday', updateLocalStorage);\r\n\r\n    initLocalStorage();\r\n}\r\n\r\nfetchBirthday();\r\n\r\n"]}